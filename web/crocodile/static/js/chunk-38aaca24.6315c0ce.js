(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38aaca24"],{"0b32":function(t,e,n){},4246:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s}));var a=n("b775");function r(){return Object(a["a"])({url:"/api/v1/host/select",method:"get"})}function i(t){return Object(a["a"])({url:"/api/v1/host",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/api/v1/host/stop",method:"put",data:t})}function s(t){return Object(a["a"])({url:"/api/v1/host",method:"delete",data:t})}},de28:function(t,e,n){"use strict";var a=n("0b32"),r=n.n(a);r.a},f884:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticStyle:{"margin-left":"25px","margin-right":"20px"}},[n("el-table",{attrs:{data:t.data}},[n("el-table-column",{attrs:{align:"center",property:"addr",label:"IP","min-width":"100"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",property:"hostname",label:"主机名","min-width":"100"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",property:"weight",label:"权重","min-width":"60"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",property:"version",label:"版本","min-width":"60"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"状态","min-width":"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.online?n("el-tag",{attrs:{type:"success",size:"mini"}},[t._v("Online")]):n("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v("Offline")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"暂停","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.stop?n("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v("Stop")]):n("el-tag",{attrs:{size:"mini",type:"success"}},[t._v("Normal")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",[e.row.stop?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"恢复在此Worker上运行任务",placement:"top"}},[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return t.changestate(e.row.id)}}},[t._v("正常")])],1):n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"暂停此Worker运行任务",placement:"top"}},[n("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(n){return t.changestate(e.row.id)}}},[t._v("暂停")])],1),t._v(" "),n("el-popconfirm",{attrs:{hideIcon:!0,title:"删除此主机?"},on:{onConfirm:function(n){return t.startdeletehost(e.row.id)}}},[n("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[t._v("删除")])],1)],1)]}}])})],1),t._v(" "),n("div",{staticStyle:{"margin-top":"10px",float:"right",height:"70px"}},[n("el-pagination",{attrs:{"page-size":t.hostquery.limit,background:"",layout:"total,prev, pager, next",total:t.pagecount},on:{"current-change":t.handleCurrentChangerun}})],1)],1)])},r=[],i=n("4246"),o=n("5c96"),s={data:function(){return{data:[],pagecount:0,hostquery:{offset:0,limit:15}}},created:function(){this.startgethost()},methods:{startgethost:function(){var t=this;Object(i["b"])(this.hostquery).then((function(e){t.data=e.data,t.pagecount=e.count}))},changestate:function(t){var e=this,n={id:t,addr:""};Object(i["d"])(n).then((function(t){0===t.code?(o["Message"].success("修改Worker状态成功"),e.startgethost()):o["Message"].error("修改Worker状态失败")}))},handleCurrentChangerun:function(t){this.hostquery.offset=(t-1)*this.hostquery.limit,this.startgethost()},startdeletehost:function(t){var e=this,n={id:t};Object(i["a"])(n).then((function(t){0===t.code?(o["Message"].success("删除成功"),e.startgethost()):o["Message"].warning("删除失败 ".concat(t.msg))}))}}},c=s,l=(n("de28"),n("2877")),u=Object(l["a"])(c,a,r,!1,null,null,null);e["default"]=u.exports}}]);